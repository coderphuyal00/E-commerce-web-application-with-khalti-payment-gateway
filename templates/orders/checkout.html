{%extends 'base.html'%}
{%block title%}Checkout{%endblock%}
{%block content%}
<section class="bg-white py-8 antialiased dark:bg-gray-900 md:py-16">
  <div class="text-center max-lg:hidden">
    <h2 class="text-3xl font-bold text-gray-800 inline-block border-b-2 border-gray-800 pb-1">Checkout</h2>
  </div>
  <form action="{%url 'create-order'%}" method="POST" name="order-summary" onsubmit="return validateForm()" class="mx-auto max-w-screen-xl px-4 2xl:px-0">
    {%csrf_token%}
    <div class="mt-6 sm:mt-8 lg:flex lg:items-start lg:gap-12 xl:gap-16">
      <div class="min-w-0 flex-1 space-y-8 ">
        <div class="p-4 space-y-4 border-1 border-gray-300 rounded-xl">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Delivery Details</h2>

          <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
            <div>
              <label for="your_name" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"> Your name*
              </label>
              <input type="text" id="your_name" name="name"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="Enter Full Name" required />
            </div>

            <div>
              <label for="your_email" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"> Your email*
              </label>
              <input type="email" id="your_email" name="email"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="Enter Receiver Email" required />
            </div>



            <div>
              <label for="select-city-input-3" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white">
                District* </label>
              <input type="text" id="your_name" name="district"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="Enter Delivery District" required />
            </div>


            <div>
              <label for="select-city-input-3" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white">
                City* </label>
              <input type="text" id="your_name" name="city"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="Enter Delivery City" required />
            </div>



            <div>
              <label for="number" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"> Phone Number*
              </label>
              <input type="number" id="number" name="number"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="Enter Receiver Phone Number" required />
            </div>
          </div>
        </div>
        <div class="p-4 payment-method border-1 border-gray-300 rounded-xl">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-white">Payment Method</h2>
          <div class="flex mt-4 p-4 gap-x-4">
            <div class="relative flex w-56 items-center justify-center rounded-xl bg-gray-50 px-4 py-3 font-medium hover:bg-gray-500/20 text-gray-700">
              <input class="peer hidden" type="radio" name="payment_method" id="khalti-radio" value="khalti" />
              <label class="peer-checked:border-blue-400 peer-checked:bg-blue-200 absolute top-0 h-full w-full cursor-pointer rounded-xl border" for="khalti-radio"> </label>
              <div class="peer-checked:border-transparent peer-checked:bg-blue-400 peer-checked:ring-2 absolute left-4 h-5 w-5 rounded-full border-2 border-gray-300 bg-gray-200 ring-blue-400 ring-offset-2"></div>
              <span class="pointer-events-none z-10">
                <svg version="1.1" id="Layer_1" width="150px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 855.7 493.8" style="enable-background:new 0 0 855.7 493.8;" xml:space="preserve">
             <style type="text/css">
               .st0{fill:#5C2D91;}
               .st1{fill:#F8A51C;}
             </style>
             <title>Brandmark_color</title>
             <g>
               <path class="st0" d="M398.4,138.4c-2.3-2.7-5.6-4.1-9.2-4h-207c-3.6-0.1-6.9,1.4-9.2,4c-2.4,2.5-3.5,6.1-2.9,9.6l14.8,142
                 c0.9,8.4,7.8,18.8,14.8,23.2l73.2,43.1c8.2,4.3,17.9,4.3,26,0l73.2-43.1c7.3-4,13.8-14.8,14.8-23.2l14.8-142
                 C401.8,144.6,400.7,141.1,398.4,138.4z M338.4,295.7c-6,4-14.1,2.4-18.1-3.5l-37.5-54.9L260.2,260v24.9c0,7.1-5.9,13-13,13
                 s-13-5.8-13-13V176.6c0-7.1,5.9-13,13-13s13,5.8,13,13v46.7l55.8-55.8c5.1-5.1,13.4-5.1,18.4,0s5.1,13.4,0,18.4l-32.8,32.8
                 c0.1,0.1,0.1,0.2,0.2,0.3l40,58.5C345.9,283.6,344.4,291.6,338.4,295.7L338.4,295.7z"/>
               <path id="_Path_" class="st0" d="M721.3,185.8v90.6c0,12.2-9.9,22.2-22.2,22.2H397.3l0.8-9.7h301c6.9-0.1,12.4-5.6,12.6-12.6v-90.8
                 c-0.1-6.9-5.6-12.4-12.6-12.6H410.3l0.8-9.7h288C711.4,163.4,721.4,173.5,721.3,185.8z"/>
               <g id="_Clip_Group_">
                 <path id="_Clipping_Path_2" class="st0" d="M435.3,206.4c0.1-1-0.6-2-1.6-2.1c-0.1,0-0.2,0-0.5,0h-4v-8.1h9.2
                   c4.4,0,6.3,1.2,6.3,5.8v32.2h4.4c2,0.1,3.8-0.7,5.2-2.1l11.5-15.9h10.7l-13.3,18.2c-1,1.5-2.3,2.8-3.8,3.8v0.2
                   c0,0,1.7,0.6,3.2,3.8l7.3,13.3c0.9,1.5,1.7,2.1,4.4,2.1h2.9v8.1h-6.9c-4.6,0-6.1-0.9-8.1-4.6l-9-16.5c-1.2-1.7-3.2-2.1-5-2.1h-3.8
                   v23.2h-9.6L435.3,206.4z"/>
               </g>
               <path id="_Path_2" class="st0" d="M487,206.8c0.1-1-0.6-2-1.6-2.1c-0.1,0-0.2,0-0.5,0h-4v-8.1h9.2c4.4,0,6.3,1.7,6.3,6.1v19.4
                 c0,1.4-0.1,2.8-0.2,4h0.2c2.1-5,8.4-10.9,18.2-10.9c11.5,0,16.8,6.3,16.8,19.1v21.3c-0.1,1,0.6,2,1.6,2.1c0.1,0,0.2,0,0.3,0h4v8.1
                 h-9.2c-4.4,0-6.3-1.7-6.3-6.3v-23.2c0-6.9-1.5-12.4-9.2-12.4c-7.4,0.1-13.7,5.1-15.6,12.1c-0.6,2.2-0.9,4.4-0.9,6.7v23.2h-9.6
                 L487,206.8z"/>
               <g id="_Clip_Group_2">
                 <path id="_Compound_Clipping_Path_" class="st0" d="M563.3,259.3c8.1,0,13.3-8.4,13.3-15.7v-1.7h-2.3c-7.3,0-19.9,0.2-19.9,9.6
                   C554.1,255.5,557.2,259.3,563.3,259.3z M574.3,235h2.1v-0.6c0-8.6-3.2-11.9-10.9-11.9c-2.3,0-8.1,0.6-8.1,3.8v2.9h-9v-5
                   c0-8.1,12.4-9.2,17.1-9.2c15.9,0,20.3,8.4,20.3,19.4v21.2c-0.1,1,0.6,2,1.7,2.1c0.1,0,0.2,0,0.3,0h4v8h-9c-4.4,0-6.1-2.1-6.1-5.8
                   c0-0.9,0.1-2,0.2-2.9h-0.2c-2.9,6-9,9.9-15.6,9.8c-8.4,0-16.8-5.2-16.8-15C544.5,236.2,566.2,235,574.3,235z"/>
               </g>
               <g id="_Clip_Group_3">
                 <path id="_Clipping_Path_3" class="st0" d="M599.7,205.1h-4.3V197h9.2c4.4,0,6.3,1.7,6.3,6.3v52.3c-0.1,1,0.6,2,1.6,2.1
                   c0.1,0,0.2,0,0.3,0h4v8.1h-9.2c-4.4,0-6.3-1.7-6.3-6.3v-52.3c0.2-0.9-0.3-1.7-1.3-2C600.1,205.1,600,205.1,599.7,205.1z"/>
               </g>
               <path id="_Path_3" class="st0" d="M627.8,223.8h-6.3v-7.5h6.7v-13.8h9.2v13.8h11.9v7.5h-11.9v22.6c0,9.8,6.8,11.3,10.3,11.3h2.5
                 v7.7c-1,0.2-2.1,0.3-3.2,0.2c-6.3,0-18.8-2.1-18.8-18.6v-23.5h-0.3V223.8z"/>
               <path id="_Path_4" class="st0" d="M665.3,196.6h5.9c0.7,0,1.3,0.6,1.3,1.3v7.4c0,0.7-0.6,1.3-1.3,1.3h-5.9c-0.7,0-1.3-0.6-1.3-1.3
                 v-7.4C664,197.2,664.6,196.6,665.3,196.6z"/>
               <path id="_Path_5" class="st0" d="M663.7,226.4c0.1-1-0.6-2-1.6-2.1c-0.1,0-0.2,0-0.5,0h-3.9v-8.1h9.2c4.4,0,6.3,1.7,6.3,6.3v33.1
                 c-0.1,1,0.6,2,1.5,2.1c0.1,0,0.2,0,0.5,0h4v8.1H670c-4.4,0-6.3-1.7-6.3-6.3V226.4z"/>
               <polygon id="_Clipping_Path_4" class="st1" points="158.8,172.1 134.4,175.2 143.4,248.1 166.6,245.4 	"/>
             </g>
             </svg></span>
            </div>
            <div class="relative flex w-56 items-center justify-center rounded-xl bg-gray-50 px-4 py-3 font-medium hover:bg-gray-500/20 text-gray-700">
              <input class="peer hidden" type="radio" name="payment_method" id="cod-radio" value="cod" />
              <label class="peer-checked:border-blue-400 peer-checked:bg-blue-200 absolute top-0 h-full w-full cursor-pointer rounded-xl border" for="cod-radio"> </label>
              <div class="peer-checked:border-transparent peer-checked:bg-blue-400 peer-checked:ring-2 absolute left-4 h-5 w-5 rounded-full border-2 border-gray-300 bg-gray-200 ring-blue-400 ring-offset-2"></div>
              <span class="pointer-events-none z-10">Cash on Delivery</span>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-6 w-full space-y-6 sm:mt-8 lg:mt-0 lg:max-w-xs xl:max-w-md">

        <div class="flow-root">
          <h5 class="text-xl font-semibold text-gray-900 dark:text-white">Order Summary</h5>
          <div>
            <!-- Product 1 -->
            {%for item in items%}
            <div class="order-items flex items-center justify-between p-6 gap-5">
              <div class="item-image w-30">
                <img src="{{item.item.product.productimage_set.first.image.url}}" alt="">
              </div>
              <div class="item-details">
                <h5>{{item.item.product.name}}</h5>
                <p class="text-gray-400">Size: {{item.size}}</p>
                <p class="text-gray-400">Color: {{item.item.color}}</p>
                <p class="text-gray-400">Qty: {{item.quantity}} @ {{item.item.product.get_price}}</p>
                <p class="text-gray-400">${{item.get_item_price}}</p>
              </div>
            </div>
            {%endfor%}
          </div>
        </div>
        <div class="flow-root">
          <div class="-my-3 divide-y divide-gray-200 dark:divide-gray-800">
            <dl class="flex items-center justify-between gap-4 py-3">
              <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Subtotal</dt>
              <dd class="text-base font-medium text-gray-900 dark:text-white">${{cart.get_total_price}}</dd>
            </dl>

            <dl class="flex items-center justify-between gap-4 py-3">
              <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Savings</dt>
              <dd class="text-base font-medium text-green-500">0</dd>
            </dl>

            <dl class="flex items-center justify-between gap-4 py-3">
              <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Store Pickup</dt>
              <dd class="text-base font-medium text-gray-900 dark:text-white">$99</dd>
            </dl>

            <dl class="flex items-center justify-between gap-4 py-3">
              <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Tax</dt>
              <dd class="text-base font-medium text-gray-900 dark:text-white">$199</dd>
            </dl>

            <dl class="flex items-center justify-between gap-4 py-3">
              <dt class="text-base font-bold text-gray-900 dark:text-white">Total</dt>
              <dd class="text-base font-bold text-gray-900 dark:text-white">$8,392.00</dd>
            </dl>
          </div>
        </div>
        <button type="submit"
          class="flex w-full text-sm px-4 py-2.5 font-semibold items-center justify-center rounded-md bg-black text-white duration-100 bg-black hover:bg-gray-700">Pay</button>
      </div>
    </div>
  </form>
</section>

<script>
  function validateForm(){
  let paymentMethod =document.forms['order-summary']['payment_method'].value;
    if (paymentMethod==''){
      alert('Please select a payment method.');
      return false;
    }
  }
</script>

{%endblock%}